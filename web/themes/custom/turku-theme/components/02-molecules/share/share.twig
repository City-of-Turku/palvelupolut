{#
/**
 * Available variables:
 * - share__base_class - the base classname
 * - share__modifiers - array of modifiers to add to the base classname
 * - share__heading - the heading of the share
 * - share__shared_url - the URL that should be shared
 * - share__shared_text - a short description of the shared content
 * - share__items - a list of social sharing link items
 *   - item.url - the url of the share link
 *   - item.icon - the name of the social service icon
 *   - item.name - the social service name
 */
#}

{% set share__base_class = "share" %}
{% set share__modifiers = share__modifiers|default([]) %}
{% set share__items = share__items|default([
  {
    url: 'https://www.facebook.com/sharer/sharer.php?u=' ~ share__shared_url,
    icon: 'facebook',
    name: 'Facebook',
  },
  {
    url: 'https://twitter.com/intent/tweet?text=' ~ share__shared_text|url_encode ~ '&url=' ~ share__shared_url,
    icon: 'twitter',
    name: 'Twitter',
  },
  {
    url: 'https://www.linkedin.com/sharing/share-offsite/?url=' ~ share__shared_url,
    icon: 'linkedin',
    name: 'Linkedin',
  },
]) %}

<div {{ bem(share__base_class, share__modifiers, share__blockname) }}>
  {% if share__heading %}
    {% include "@atoms/text/heading/heading.twig" with {
      heading__base_class: "title",
      heading__blockname: share__base_class,
      heading__level: share__heading_level|default(4),
      heading: share__heading,
    } %}
  {% endif %}

  {% embed "@atoms/lists/list-unordered.twig" with {
    list__base_class: "list",
    list__modifiers: share__modifiers,
    list__blockname: share__base_class,
  } %}
    {% block list_content %}
      {% for item in share__items %}
        {% embed "@atoms/lists/list-item.twig" with {
          list_item__base_class: "item",
          list_item__blockname: share__base_class,
        } %}
          {% block list_item_content %}
            {% embed "@atoms/links/link/link.twig" with {
              link__url: item.url,
              link__blockname: share__base_class,
              link__modifiers: ["external"],
            } %}
              {% block link_content %}
                {% include "@atoms/images/icon/icon.twig" with {
                  icon__name: item.icon,
                  icon__title: item.name,
                  icon__decorative: true,
                  icon__base_class: "icon",
                  icon__blockname: share__base_class,
                } %}
                <span {{ bem("visually-hidden") }}>{{ "Share with"|t }} {{ item.name }}</span>
              {% endblock %}
            {% endembed %}

          {% endblock %}
        {% endembed %}
      {% endfor %}
    {% endblock %}
  {% endembed %}
</div>
