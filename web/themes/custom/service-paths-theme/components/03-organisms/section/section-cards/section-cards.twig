{#
/**
 * Available variables:
 * - section_cards__base_class - the base classname
 * - section_cards__modifiers - array of modifiers to add to the base classname
 * - section_cards__blockname - a class that will prepend all other classes
 * - section_cards__title - the section title
 * - section_cards__link_title - the section read more link title
 * - section_cards__link_url - the section read more link url
 *
 * Available blocks:
 * - section_cards_items - wraps the section items.
 */
#}
{% set section_cards__base_class = section_cards__base_class|default("section-cards") %}
{% set section_cards__modifiers = section_cards__modifiers|default([]) %}

{% if "large" in section_cards__modifiers %}
  {% set is_large = true %}
{% endif %}

<div {{ bem(section_cards__base_class, section_cards__modifiers) }}>
  {% if section_cards__title %}
    {% include "@atoms/text/heading/heading.twig" with {
      "heading": section_cards__title,
      "heading__level": section_cards__title_level|default("2"),
    } %}
  {% endif %}

  <div {{ bem("items", [], section_cards__base_class) }}>
    {% block section_cards_items %}
      {% for item in section_cards__items %}
        {% embed "@organisms/section/section-cards/section-cards-item.twig" %}
          {% block section_cards_item %}
            {% if item.placeholder %}
              {% if is_large %}
                {% set card_modifiers = loop.first ? ["large"] : ["small"] %}
              {% endif %}

              {% include "@molecules/cards/card/card.twig" with {
                card__modifiers: card_modifiers,
                card__image__src: item.image__src,
                card__heading: item.heading,
                card__link__url: item.link__url,
                card__type: item.type,
                card__category: item.category,
                card__date: item.date,
                card__tag: item.tag,
                card__meta_primary: item.meta_primary,
              } %}
            {% else %}
              {{ item }}
            {% endif %}
          {% endblock %}
        {% endembed %}
      {% endfor %}
    {% endblock %}
  </div>

  {% if section_cards__link__title and section_cards__link__url %}
    {% include "@atoms/links/link/link.twig" with {
      link__content: section_cards__link__title,
      link__url: section_cards__link__url,
      link__modifiers: ["action"],
    } %}
  {% endif %}
</div>
