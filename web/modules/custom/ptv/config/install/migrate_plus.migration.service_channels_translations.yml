id: service_channels_translations
migration_group: ptv
label: 'Service Channels translations'
source:
  plugin: config
  configuration_name: ptv.settings
  key: service_channels
  languages:
    - fi
    - en
    - sv
  constants:
    uid: 1
process:
  nid:
    plugin: migration_lookup
    source: id
    migration: service_channels
  type:
    plugin: default_value
    default_value: service_channel
  title: name
  langcode: langcode
  field_services:
    plugin: migration_lookup
    source: services
    migration: services
    no_stub: true

  field_description/value: description
  field_description/summary: summary
  field_description/format:
    plugin: default_value
    default_value: basic_html

  field_accessibility/value: accessibility
  field_accessibility/format:
    plugin: default_value
    default_value: basic_html

  field_opening_hours: opening_hours

  field_tags:
    plugin: entity_generate
    source: ontology_terms
    entity_type: taxonomy_term
    bundle: tags
    property: name
    values:
      langcode: langcode

  field_email: email
  field_phone_numbers: phone_numbers
  field_webpage: webpage
  field_address: address
  field_languages: langs
  field_service_channel_type: channel_type

  path/pathauto:
    plugin: default_value
    default_value: 1
  uid: constants/uid
destination:
  plugin: 'entity:node'
  translations: true
migration_dependencies:
  required:
    - service_channels
  optional: {  }
