id: services_translations
migration_group: ptv
label: 'Services translations'
source:
  plugin: config
  configuration_name: ptv.settings
  key: services
  languages:
    - fi
    - en
    - sv
  constants:
    uid: 1
process:
  nid:
    plugin: migration_lookup
    source: id
    migration: services
  type:
    plugin: default_value
    default_value: service
  title: name
  langcode: langcode

  field_description/value: description
  field_description/summary: summary
  field_description/format:
    plugin: default_value
    default_value: basic_html

  field_requirements/value: requirements
  field_requirements/format:
    plugin: default_value
    default_value: basic_html

  field_tags:
    plugin: entity_generate
    source: ontology_terms
    entity_type: taxonomy_term
    bundle: tags
    property: name
    values:
      langcode: langcode

  field_target_groups:
    plugin: entity_generate
    source: target_groups
    entity_type: taxonomy_term
    bundle: target_groups
    property: name
    values:
      langcode: langcode

  field_service_classes:
    plugin: entity_generate
    source: service_classes
    entity_type: taxonomy_term
    bundle: service_classes
    property: name
    values:
      langcode: langcode

  path/pathauto:
    plugin: default_value
    default_value: 1
  uid: constants/uid
destination:
  plugin: 'entity:node'
  translations: true
migration_dependencies:
  required:
    - services
  optional: {  }
